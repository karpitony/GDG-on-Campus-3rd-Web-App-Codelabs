브라우저가 데이터를 다루는 공간은 크게 RAM과 Disk로 구분가능

 **메모리 영역 (RAM)**

• **특징:**
    ◦ 속도가 가장 빠르다
    ◦ **휘발성(Volatile):** 탭을 닫거나 **새로고침(F5)** 하면 데이터가 즉시 초기화.
• **대표 주자:** 변수(`const`), State(`useState`), Server State(`TanStack Query`)

 **디스크 영역 (HDD/SSD)**

• **특징:**
    ◦ RAM보다는 느리지만 영구적(느려도 서버와의 통신보다는 훨씬 빠르다)
    ◦ **영속성:** 컴퓨터를 껐다 켜도 데이터가 **파일 형태**로 남아있음.
• **대표 주자:** `Local Storage`, `Session Storage`, `IndexedDB`, `Cache API`

**2. 저장소 종류별 특징 & Use Case**

**① State & TanStack Query (Memory)**

• **설명:** 가장 빈번하게 사용되는, 실행 중인 앱의 상태, 서버로 부터 받아온 데이터를 렌더링 해줄 때 사용.
• **언제 쓰는가?**
    1. **실시간 검색어 입력:** 엔터 치기 전까지 저장할 필요 없음.
    2. **모달(Modal) 열림 여부:** 새로고침 후에도 모달이 떠 있으면 오히려 어색/ state를 이용해 단계별로 렌더링 모달을 결정 지을 경우
    3. **서버 데이터 :** 게시글 목록 등은 DB(원본)가 따로 있으므로, 영구 저장보다는 최신화가 중요.

**② Session Storage**

• **설명:** 탭(Tab)마다 독립적으로 존재하는 공간. 탭을 닫으면 휘발.
• **언제 쓰는가?**
    1. **멀티 스텝 폼 (회원가입):** 입력 도중 실수로 새로고침 했을 때 데이터 복구용.
    2. **비회원 임시 장바구니:** "이 탭에서만" 유효한 임시 담기.

**③ Local Storage**

• **설명:** 사용자가 직접 지우기 전(ex)개발자 도구로 지우기)까지 영원히 남는 텍스트 저장소.
• **언제 쓰는가?**
    1. **전역 테마 설정:** 다크 모드/라이트 모드 (다시 와도 유지돼야 함).
    2. **'오늘 하루 보지 않기':** 팝업 만료 날짜 저장.
    3. **검색 기록:** 서버에 보낼 필요 없는 나만의 검색 이력.
    4. 로그인

**④ IndexedDB**

• **설명:** 브라우저 안의 거대한 데이터베이스. 로컬/세션 스토리지와 대용량의 구조화된 DB를 저장할 수 있다. JSON 객체나 파일을 통째로 넣을 수 있습니다.
• **언제 쓰는가?**
    1. **작성 중인 긴 글 임시 저장:** 이미지 포함된 에디터 데이터.
    2. **오프라인 모드 데이터:** 인터넷 끊겼을 때 보여줄 게시글 렌더링

**⑤ Cache API**

• **설명:** 네트워크 요청(Request)과 응답(Response)을 통째로 저장합니다. (PWA에서 많이 사용)
• **언제 쓰는가?**
    1. **정적 리소스:** 로고, 폰트, CSS 파일 등.
    2. **App Shell:** 앱의 기본 껍데기 UI (오프라인 대응).

**3. 저장소의 특성을 무시하고 사용하였을 때 발생하는 문제 ex**

**Case 1:** `Local Storage`에 Access Token을 저장하고, 탭 A와 탭 B에서 각각 다른 아이디로 로그인 시도.
• **문제:** Local Storage는 모든 탭이 공유합니다. 탭 B에서 로그인하는 순간 탭 A의 토큰도 덮어씌워져서, **탭 A에서 결제했는데 탭 B 계정으로 결제되는 문제** 발생.
해결방법 → 다중 계정 로그인이 필요한 서비스라면 `Session Storage`나 `Cookie`를 고려해야 합니다.

**Case 2.** 자주 변하는 상품 가격/재고 정보를 `Local Storage` 에 저장 해놓고 업데이트 하지 않은 경우
• **문제:** 서버에서 가격을 2배로 올려도, 클라이언트는 로컬 스토리지에 있는 옛날 가격(10,000원)을 보여준다→ 결제할 때 금액 오류 발생
 해결방법 → 변동성이 큰 서버 데이터는 저장하지 말고 `TanStack Query` 등을 이용해 실시간으로 관리    

****

**저장소의 사용 방법에 '절대적인 정답'은 없다**

상황을 고려한 적절한 저장소를 선택 필요
• **개발 속도 vs 보안:**
    ◦ 보안성 보다는 개발 속도가 중요한 프로젝트이거나 MVP 단계라면, 복잡한 쿠키 설정보다 **Local Storage**에 토큰을 넣고 빠르게 개발하는 게 '정답'일 수 있습니다.
• **공유 vs 격리 (UX):**
    ◦ 여러 탭을 띄워놓고 쇼핑하는 사이트라면, 장바구니/accessToken이 공유되는 **Local Storage**가 Session Storage보다 훨씬 좋은 사용자 경험(UX)을 줍니다.
• **정확성 vs 가용성 (PWA):**
    ◦ 인터넷이 불안정한 환경이라면→ 최신 정보가 아닐지라도 일단 보여주는 게 낫다는 판단하에, **IndexedDB**에 저장된(조금 지난) 데이터를 보여주는 것이 404 에러 화면보다 훨씬 낫다